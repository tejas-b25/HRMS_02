<div class="edit-employee-container">

  <button class="btn back" (click)="onBack()">‚Üê Back</button>

  <h2>Edit Employee</h2>

  <div *ngIf="loading" class="alert info">Loading...</div>
  <div *ngIf="errorMessage" class="alert error">{{ errorMessage }}</div>
  <div *ngIf="successMessage" class="alert success">{{ successMessage }}</div>

  <form #editForm="ngForm" (ngSubmit)="onSubmit(editForm)" *ngIf="!loading" novalidate>

    <div class="grid">

      <div>
        <label>First Name *</label>
        <input type="text" name="firstName" [(ngModel)]="formData.firstName"
               placeholder="Enter first name"
               required pattern="^[A-Za-z ]+$"
               #firstName="ngModel"
               [class.invalid]="firstName.invalid && firstName.touched">
        <small *ngIf="firstName.invalid && firstName.touched">Alphabets only</small>
      </div>

      <div>
        <label>Last Name</label>
        <input type="text" name="lastName" [(ngModel)]="formData.lastName"
               placeholder="Enter last name"
               pattern="^[A-Za-z ]+$">
      </div>

      <div>
        <label>Username *</label>
        <input type="text" name="username" [(ngModel)]="formData.username"
               placeholder="Username"
               required #username="ngModel"
               [class.invalid]="username.invalid && username.touched">
        <small *ngIf="username.invalid && username.touched">Username required</small>
      </div>

      <div>
        <label>Email *</label>
        <input type="email" name="email" [(ngModel)]="formData.email"
               placeholder="example@mail.com"
               required #email="ngModel"
               [class.invalid]="email.invalid && email.touched">
        <small *ngIf="email.invalid && email.touched">Valid email required</small>
      </div>

      <div>
        <label>Gender *</label>
        <select name="gender" [(ngModel)]="formData.gender"
                required #gender="ngModel"
                [class.invalid]="gender.invalid && gender.touched">
          <option value="">Select Gender</option>
          <option *ngFor="let g of genders" [value]="g">{{ g }}</option>
        </select>
        <small *ngIf="gender.invalid && gender.touched">Required</small>
      </div>

      <div>
        <label>Date of Birth *</label>
        <input type="date" name="dateOfBirth"
               [(ngModel)]="formData.dateOfBirth"
               required #dob="ngModel"
               [class.invalid]="dob.invalid && dob.touched">
        <small *ngIf="dob.invalid && dob.touched">Required</small>
      </div>

      <div>
        <label>Contact Number *</label>
        <input type="text" name="contactNumber"
               [(ngModel)]="formData.contactNumber"
               placeholder="10 digit number"
               required pattern="^[0-9]{10}$"
               #contact="ngModel"
               [class.invalid]="contact.invalid && contact.touched">
        <small *ngIf="contact.invalid && contact.touched">10 digits only</small>
      </div>

      <div>
        <label>Address</label>
        <input type="text" name="address"
               [(ngModel)]="formData.address"
               placeholder="Enter address">
      </div>

      <div>
        <label>Department *</label>
        <select name="department"
                [(ngModel)]="formData.department"
                required #department="ngModel"
                [class.invalid]="department.invalid && department.touched">
          <option value="">Select Department</option>
          <option *ngFor="let d of departments" [value]="d">{{ d }}</option>
        </select>
        <small *ngIf="department.invalid && department.touched">Required</small>
      </div>

      <div>
        <label>Designation *</label>
        <select name="designation"
                [(ngModel)]="formData.designation"
                required #designation="ngModel"
                [class.invalid]="designation.invalid && designation.touched">
          <option value="">Select Designation</option>
          <option *ngFor="let des of designations" [value]="des">{{ des }}</option>
        </select>
        <small *ngIf="designation.invalid && designation.touched">Required</small>
      </div>

      <div>
        <label>Employment Type *</label>
        <select name="employmentType"
                [(ngModel)]="formData.employmentType"
                required>
          <option *ngFor="let e of employmentTypes" [value]="e">{{ e }}</option>
        </select>
      </div>

      <div>
        <label>Role *</label>
        <select name="role"
                [(ngModel)]="formData.role"
                required>
          <option *ngFor="let r of roles" [value]="r">{{ r }}</option>
        </select>
      </div>

      <div>
        <label>Reporting Manager ID *</label>
        <input type="number" name="reportingManagerId"
               [(ngModel)]="formData.reportingManagerId"
               placeholder="Manager ID"
               required>
      </div>

      <div>
        <label>HRBP ID *</label>
        <input type="number" name="hrbpId"
               [(ngModel)]="formData.hrbpId"
               placeholder="HRBP ID"
               required>
      </div>

      <div>
        <label>Status *</label>
        <select name="status"
                [(ngModel)]="formData.status"
                required>
          <option value="ACTIVE">ACTIVE</option>
          <option value="INACTIVE">INACTIVE</option>
        </select>
      </div>

    </div>

    <button class="btn primary" type="submit" [disabled]="saving">
      {{ saving ? 'Saving...' : 'Save Changes' }}
    </button>

  </form>
</div>
