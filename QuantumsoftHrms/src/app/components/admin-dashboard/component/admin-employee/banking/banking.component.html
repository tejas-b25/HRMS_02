<div class="banking-page p-3">

  <h3>Employee Banking Details</h3>

  <div *ngIf="message" class="alert alert-success">{{ message }}</div>
  <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

  <form [formGroup]="bankForm" (ngSubmit)="submit()" class="card p-3 mb-3" novalidate>

    <input type="hidden" formControlName="id" />

    <div class="row mb-2">

      <div class="col-md-4">
        <label>Employee ID *</label>
        <input
          type="text"
          class="form-control"
          placeholder="Enter employee ID"
          formControlName="employeeId"
          [class.invalid]="employeeIdCtrl?.invalid && employeeIdCtrl?.touched">
        <small class="error" *ngIf="employeeIdCtrl?.invalid && employeeIdCtrl?.touched">
          Employee ID is required
        </small>
      </div>

      <div class="col-md-4">
        <label>Bank Name *</label>
        <input
          type="text"
          class="form-control"
          placeholder="Enter bank name"
          formControlName="bankName"
          [class.invalid]="bankNameCtrl?.invalid && bankNameCtrl?.touched">
        <small class="error" *ngIf="bankNameCtrl?.invalid && bankNameCtrl?.touched">
          Bank name is required
        </small>
      </div>

      <div class="col-md-4">
        <label>Account Holder Name *</label>
        <input
          type="text"
          class="form-control"
          placeholder="Account holder name"
          formControlName="accountHolderName"
          [class.invalid]="accountHolderCtrl?.invalid && accountHolderCtrl?.touched">
        <small class="error" *ngIf="accountHolderCtrl?.invalid && accountHolderCtrl?.touched">
          Account holder name is required
        </small>
      </div>

    </div>

    <div class="row mb-2">

      <div class="col-md-4">
        <label>Account Number *</label>
        <input
          type="text"
          class="form-control"
          placeholder="Enter account number"
          formControlName="accountNumber"
          [class.invalid]="accountNumberCtrl?.invalid && accountNumberCtrl?.touched">
        <small class="error" *ngIf="accountNumberCtrl?.invalid && accountNumberCtrl?.touched">
          Account number is required
        </small>
      </div>

      <div class="col-md-4">
        <label>Account Type</label>
        <select class="form-select" formControlName="accountType">
          <option value="Savings">Savings</option>
          <option value="Current">Current</option>
        </select>
      </div>

      <div class="col-md-4">
        <label>IFSC Code *</label>
        <input
          type="text"
          class="form-control"
          placeholder="e.g. SBIN0001234"
          formControlName="ifsc"
          [class.invalid]="ifscCtrl?.invalid && ifscCtrl?.touched">
        <small class="error" *ngIf="ifscCtrl?.invalid && ifscCtrl?.touched">
          Valid IFSC is required
        </small>
      </div>

    </div>

    <div class="row mb-2">

      <div class="col-md-6">
        <label>Branch *</label>
        <input
          type="text"
          class="form-control"
          placeholder="Branch name"
          formControlName="branch"
          [class.invalid]="branchCtrl?.invalid && branchCtrl?.touched">
        <small class="error" *ngIf="branchCtrl?.invalid && branchCtrl?.touched">
          Branch is required
        </small>
      </div>

      <div class="col-md-6">
        <label>UAN Number</label>
        <input
          type="text"
          class="form-control"
          placeholder="UAN number (optional)"
          formControlName="uanNumber">
      </div>

    </div>

    <div class="text-end mt-3">
      <button class="btn btn-primary me-2" type="submit" [disabled]="loading">
        {{ loading ? 'Saving...' : 'Save / Add' }}
      </button>

      <button class="btn btn-outline-success me-2" type="button" (click)="update()" [disabled]="loading">
        Update
      </button>

      <button class="btn btn-outline-danger" type="button" (click)="deleteLoaded()" [disabled]="loading">
        Delete
      </button>
    </div>

  </form>

  <div *ngIf="loadedBank" class="card p-3">
    <h5>Loaded Bank Details</h5>

    <div class="row">
      <div class="col-md-4"><b>Employee ID:</b> {{ loadedBank.employeeId }}</div>
      <div class="col-md-4"><b>Bank:</b> {{ loadedBank.bankName }}</div>
      <div class="col-md-4"><b>Account No:</b> {{ loadedBank.accountNumber }}</div>
    </div>

    <div class="row mt-2">
      <div class="col-md-4"><b>Account Holder:</b> {{ loadedBank.accountHolderName }}</div>
      <div class="col-md-4"><b>IFSC:</b> {{ loadedBank.ifsc }}</div>
      <div class="col-md-4"><b>Branch:</b> {{ loadedBank.branch }}</div>
    </div>

    <div class="row mt-2">
      <div class="col-md-4"><b>UAN:</b> {{ loadedBank.uanNumber }}</div>
      <div class="col-md-4"><b>Updated At:</b> {{ loadedBank.updatedAt || loadedBank.createdAt }}</div>
    </div>
  </div>

</div>
