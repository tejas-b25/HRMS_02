<div class="timesheet-container">

  <h2>Submit Timesheet</h2>

  <form [formGroup]="timesheetForm" (ngSubmit)="submit()" novalidate>

    <div class="field">
      <label>Employee ID *</label>
      <input
        type="number"
        placeholder="Enter employee ID"
        formControlName="employeeId" />

      <div class="error"
           *ngIf="timesheetForm.get('employeeId')?.touched &&
                  timesheetForm.get('employeeId')?.errors?.['required']">
        Employee ID is required
      </div>
    </div>

    <div class="field">
      <label>Project Code *</label>
      <input
        type="text"
        placeholder="e.g. PROJ-101"
        formControlName="projectCode" />

      <div class="error"
           *ngIf="timesheetForm.get('projectCode')?.touched &&
                  timesheetForm.get('projectCode')?.errors?.['required']">
        Project code is required
      </div>
    </div>

    <div class="field">
      <label>Task Code *</label>
      <input
        type="text"
        placeholder="e.g. TASK-DEV"
        formControlName="taskCode" />

      <div class="error"
           *ngIf="timesheetForm.get('taskCode')?.touched &&
                  timesheetForm.get('taskCode')?.errors?.['required']">
        Task code is required
      </div>
    </div>

    <div class="field">
      <label>Work Date *</label>
      <input
        type="date"
        formControlName="workDate" />

      <div class="error"
           *ngIf="timesheetForm.get('workDate')?.touched &&
                  timesheetForm.get('workDate')?.errors?.['required']">
        Work date is required
      </div>
    </div>

    <div class="field">
      <label>Hours Worked *</label>
      <input
        type="number"
        step="0.1"
        placeholder="e.g. 8"
        formControlName="hoursWorked" />

      <div class="error"
           *ngIf="timesheetForm.get('hoursWorked')?.touched &&
                  timesheetForm.get('hoursWorked')?.errors?.['required']">
        Hours worked is required
      </div>

      <div class="error"
           *ngIf="timesheetForm.get('hoursWorked')?.touched &&
                  timesheetForm.get('hoursWorked')?.errors?.['min']">
        Minimum hours should be 0.1
      </div>
    </div>

    <div class="field">
      <label>Remarks</label>
      <textarea
        rows="2"
        placeholder="Optional remarks"
        formControlName="remarks"></textarea>
    </div>

    <button type="submit" [disabled]="loading">
      {{ loading ? 'Submitting...' : 'Submit Timesheet' }}
    </button>

    <p class="success" *ngIf="successMsg">{{ successMsg }}</p>
    <p class="error-msg" *ngIf="errorMsg">{{ errorMsg }}</p>

  </form>

  <table class="timesheet-table" *ngIf="timesheetList.length">
    <thead>
      <tr>
        <th>ID</th>
        <th>Employee</th>
        <th>Project</th>
        <th>Task</th>
        <th>Date</th>
        <th>Hours</th>
        <th>Status</th>
        <th>Remarks</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let t of timesheetList">
        <td>{{ t.timesheetId }}</td>
        <td>{{ t.employee?.name || '-' }}</td>
        <td>{{ t.projectCode }}</td>
        <td>{{ t.taskCode }}</td>
        <td>{{ t.workDate }}</td>
        <td>{{ t.hoursWorked }}</td>
        <td>{{ t.status }}</td>
        <td>{{ t.remarks || '-' }}</td>
      </tr>
    </tbody>
  </table>

</div>
