<div class="attendance-clockin-container p-3">
  <h3>Clock In</h3>

  <!-- Messages -->
  <div *ngIf="loading" class="alert alert-info">Submitting clock-in...</div>
  <div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>
  <div *ngIf="successMessage" class="alert alert-success">{{ successMessage }}</div>

  <form #clockInForm="ngForm" (ngSubmit)="onSubmit(clockInForm)">

    <!-- Employee ID -->
    <div class="mb-3">
      <label class="form-label">Employee ID *</label>
      <input
        type="text"
        class="form-control"
        name="employeeId"
        [(ngModel)]="clockInData.employeeId"
        required
      />
    </div>

    <!-- Geo Location -->
    <div class="mb-3">
      <label class="form-label">
        Geo Location (lat,lng)
      </label>
      <input
        type="text"
        class="form-control"
        name="geoLocation"
        [(ngModel)]="clockInData.geoLocation"
        placeholder="19.7582,75.3203"
      />
    </div>

    <!-- Device Type & Status -->
    <div class="row mb-3">
      <div class="col">
        <label class="form-label">Device Type *</label>
        <select
          class="form-select"
          name="deviceType"
          [(ngModel)]="clockInData.deviceType"
          required
        >
          <option value="MOBILE">MOBILE</option>
          <option value="DESKTOP">DESKTOP</option>
          <option value="TABLET">TABLET</option>
        </select>
      </div>

      <div class="col">
        <label class="form-label">Status *</label>
        <select
          class="form-select"
          name="status"
          [(ngModel)]="clockInData.status"
          required
        >
          <option value="PRESENT">PRESENT</option>
          <option value="ABSENT">ABSENT</option>
          <option value="LATE">LATE</option>
        </select>
      </div>
    </div>

    <!-- Attendance Date & Clock-in Time -->
    <div class="row mb-3">
      <div class="col">
        <label class="form-label">Attendance Date *</label>
        <input
          type="date"
          class="form-control"
          name="attendanceDate"
          [(ngModel)]="clockInData.attendanceDate"
          required
        />
      </div>

      <div class="col">
        <label class="form-label">
          Clock-in Time (ISO) *
        </label>
        <div class="input-group">
          <input
            type="text"
            class="form-control"
            name="clockInTime"
            [(ngModel)]="clockInData.clockInTime"
            required
            placeholder="2025-10-10T10:30:00"
          />
          <button
            type="button"
            class="btn btn-outline-secondary"
            (click)="useCurrentTime()"
          >
            Use current
          </button>
        </div>
      </div>
    </div>

    <button
      type="submit"
      class="btn btn-primary"
      [disabled]="loading"
    >
      {{ loading ? 'Clocking in...' : 'Clock In' }}
    </button>
  </form>

  <!-- Optional: Debug response -->
  <!--
  <pre class="mt-3" *ngIf="lastResponse">
    {{ lastResponse | json }}
  </pre>
  -->
</div>
