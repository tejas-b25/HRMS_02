<div class="review-page">

  <div class="review-form-card">
    <h3>{{ isEditMode ? 'Edit Performance Review' : 'Create Performance Review' }}</h3>

    <form #f="ngForm" (ngSubmit)="submit(f)">

      <div class="row">

        <div>
          <label>Employee ID</label>
          <input
            type="number"
            name="employeeId"
            [(ngModel)]="form.employeeId"
            placeholder="Employee ID"
            required
            min="1"
            #emp="ngModel"
            [class.invalid]="emp.touched && emp.invalid">
          <small *ngIf="emp.touched && emp.invalid" class="error">
            Valid employee ID required
          </small>
        </div>

        <div>
          <label>KPI ID</label>
          <input
            type="number"
            name="kpiId"
            [(ngModel)]="form.kpiId"
            placeholder="KPI ID"
            required
            min="1"
            #kpi="ngModel"
            [class.invalid]="kpi.touched && kpi.invalid">
          <small *ngIf="kpi.touched && kpi.invalid" class="error">
            Valid KPI ID required
          </small>
        </div>

        <div>
          <label>Review Period</label>
          <input
            name="reviewPeriod"
            [(ngModel)]="form.reviewPeriod"
            placeholder="Q1-2025"
            required
            pattern="^[A-Za-z0-9-]+$"
            #period="ngModel"
            [class.invalid]="period.touched && period.invalid">
          <small *ngIf="period.touched && period.invalid" class="error">
            Format like Q1-2025
          </small>
        </div>

      </div>

      <div class="row">

        <div>
          <label>Self Score</label>
          <input
            type="number"
            step="0.1"
            name="selfScore"
            [(ngModel)]="form.selfScore"
            placeholder="0 – 5"
            min="0"
            max="5"
            required
            #self="ngModel"
            [class.invalid]="self.touched && self.invalid">
          <small *ngIf="self.touched && self.invalid" class="error">
            Score 0 – 5 required
          </small>
        </div>

        <div>
          <label>Manager Score</label>
          <input
            type="number"
            step="0.1"
            name="managerScore"
            [(ngModel)]="form.managerScore"
            placeholder="0 – 5"
            min="0"
            max="5"
            required
            #mgr="ngModel"
            [class.invalid]="mgr.touched && mgr.invalid">
          <small *ngIf="mgr.touched && mgr.invalid" class="error">
            Score 0 – 5 required
          </small>
        </div>

        <div>
          <label>Status</label>
          <select
            name="reviewStatus"
            [(ngModel)]="form.reviewStatus"
            required>
            <option value="Pending">Pending</option>
            <option value="Completed">Completed</option>
          </select>
        </div>

      </div>

      <label>Feedback</label>
      <textarea
        name="feedback"
        [(ngModel)]="form.feedback"
        placeholder="Write feedback"
        required
        #fb="ngModel"
        [class.invalid]="fb.touched && fb.invalid"></textarea>
      <small *ngIf="fb.touched && fb.invalid" class="error">
        Feedback is required
      </small>

      <div class="actions">
        <button class="btn-save" type="submit">
          {{ isEditMode ? 'Update Review' : 'Save Review' }}
        </button>
        <button *ngIf="isEditMode" type="button" class="btn-cancel" (click)="reset(f)">
          Cancel
        </button>
      </div>

    </form>
  </div>

</div>
